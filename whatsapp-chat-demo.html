<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WealthBot Assistant - FinWealth Advisors</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #e5ddd5;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
        }

        .chat-container {
            width: 900px;
            max-width: 900px;
            height: 95vh;
            margin: 20px auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.15);
            display: flex;
            flex-direction: column;
            position: relative;
            overflow: hidden;
        }

        .chat-header {
            background: #075e54;
            color: white;
            padding: 16px 24px;
            display: flex;
            align-items: center;
            gap: 16px;
            border-bottom: 1px solid #128c7e;
        }

        .header-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #25d366;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 18px;
        }

        .header-info h1 {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .header-info p {
            font-size: 13px;
            opacity: 0.9;
        }

        .client-info {
            font-size: 12px;
            opacity: 0.8;
            margin-top: 2px;
        }

        .client-info .client-name {
            font-weight: 500;
            color: #25d366;
        }

        .client-info .client-time {
            opacity: 0.7;
        }

        .online-indicator {
            margin-left: auto;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 13px;
        }

        .online-dot {
            width: 8px;
            height: 8px;
            background: #25d366;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }

        .chat-area {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            background: #e5ddd5;
            position: relative;
            min-height: 400px;
        }

        .content-view {
            width: 100%;
            height: 100%;
            display: none;
        }

        .content-view.active {
            display: block;
        }

        .chat-messages {
            flex: 1;
            padding: 16px;
            overflow-y: auto;
            background: #e5ddd5;
            min-height: 0;
        }

        .message {
            margin-bottom: 20px;
            display: flex;
            align-items: flex-end;
            gap: 8px;
            animation: messageSlideIn 0.3s ease-out;
        }

        @keyframes messageSlideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .message.customer {
            flex-direction: row-reverse;
        }

        .message.bot {
            flex-direction: row;
        }

        .message-content {
            max-width: 75%;
            padding: 12px 16px;
            border-radius: 18px;
            font-size: 14px;
            line-height: 1.4;
            position: relative;
            word-wrap: break-word;
        }

        .message-content strong {
            font-weight: bold;
        }

        .customer .message-content {
            background: #dcf8c6;
            color: #000;
            border-bottom-right-radius: 4px;
        }

        .bot .message-content {
            background: white;
            color: #000;
            border-bottom-left-radius: 4px;
            box-shadow: 0 1px 2px rgba(0,0,0,0.1);
            max-width: 75%;
        }

        .visual-content {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 8px;
            margin: 8px 0;
            text-align: center;
            max-width: 100%;
            overflow: hidden;
            width: 200px;
            height: 200px;
            display: inline-block;
            box-sizing: border-box;
        }

        .portfolio-chart {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            color: #333;
            padding: 15px;
            border-radius: 8px;
            margin: 8px 0;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            max-width: 100%;
            overflow: hidden;
            width: 300px;
            height: 180px;
            display: inline-block;
            box-sizing: border-box;
        }

        .portfolio-chart h3 {
            font-size: 16px;
            margin-bottom: 12px;
            color: #333;
            margin-top: 0;
        }

        .metric-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 8px;
            margin: 10px 0;
            width: 100%;
            height: auto;
            max-height: 200px;
        }

        .metric-item {
            background: #e8f5e8;
            border: 1px solid #4caf50;
            border-radius: 4px;
            padding: 8px;
            text-align: center;
            min-height: 45px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            box-sizing: border-box;
        }

        .metric-value {
            font-size: 14px;
            font-weight: bold;
            color: #2e7d32;
            margin-bottom: 3px;
            line-height: 1;
        }

        .metric-label {
            font-size: 10px;
            color: #666;
            line-height: 1.1;
            text-align: center;
            word-wrap: break-word;
            max-width: 100%;
        }

        .portfolio-chart .metric-item {
            background: #e8f5e8;
            border: 1px solid #4caf50;
        }

        .portfolio-chart .metric-value {
            color: #2e7d32;
        }

        .portfolio-chart .metric-label {
            color: #666;
        }

        .portfolio-chart p {
            font-size: 9px;
            margin-top: 5px;
            color: #666;
            line-height: 1.1;
        }

        .message-with-visual {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
        }

        .message-with-visual .visual-section {
            text-align: center;
        }

        .message-with-visual .text-section {
            text-align: left;
            width: 100%;
        }

        .dashboard-screen {
            display: none;
            width: 100%;
            height: 100%;
            background: #e5ddd5;
            color: #333;
            padding: 15px;
            overflow-y: hidden;
        }

        .dashboard-container {
            max-width: 900px;
            margin: 20px auto;
            height: 95vh;
            box-shadow: 0 4px 20px rgba(0,0,0,0.15);
        }

        .dashboard-header {
            text-align: center;
            margin-bottom: 20px;
        }

        .dashboard-title {
            font-size: 1.4rem;
            font-weight: 700;
            margin-bottom: 6px;
            color: #075e54;
        }

        .dashboard-subtitle {
            font-size: 0.9rem;
            color: #666;
        }

        .metrics-section {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .section-title {
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 12px;
            color: #075e54;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 12px;
            margin-bottom: 15px;
        }

        .stat-card {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 12px;
            text-align: center;
        }

        .stat-number {
            font-size: 1.2rem;
            font-weight: 700;
            color: #25d366;
            margin-bottom: 4px;
        }

        .stat-label {
            font-size: 0.7rem;
            color: #666;
        }

        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 12px 0;
        }

        .comparison-table th,
        .comparison-table td {
            padding: 8px;
            text-align: left;
            border-bottom: 1px solid #e9ecef;
            font-size: 0.8rem;
        }

        .comparison-table th {
            background: #f8f9fa;
            font-weight: 600;
            color: #075e54;
        }

        .impact-highlight {
            background: linear-gradient(135deg, #25d366 0%, #128c7e 100%);
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            margin: 15px 0;
            box-shadow: 0 4px 15px rgba(37, 221, 102, 0.3);
        }

        .impact-quote {
            font-size: 0.9rem;
            font-style: italic;
            color: white;
            margin: 0;
        }

        .business-impact-screen {
            display: none;
            width: 100%;
            height: 100%;
            background: #e5ddd5;
            color: #333;
            padding: 15px;
            overflow-y: hidden;
        }

        .impact-container {
            max-width: 900px;
            margin: 20px auto;
            height: 95vh;
            box-shadow: 0 4px 20px rgba(0,0,0,0.15);
            text-align: center;
        }

        .impact-title {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 12px;
            color: #075e54;
        }

        .impact-subtitle {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 20px;
        }

        .impact-metrics {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .impact-card {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 10px;
            padding: 15px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            border: 1px solid #e9ecef;
        }

        .impact-icon {
            font-size: 2rem;
            margin-bottom: 12px;
        }

        .impact-number {
            font-size: 1.5rem;
            font-weight: 700;
            color: #25d366;
            margin-bottom: 6px;
        }

        .impact-description {
            font-size: 0.8rem;
            color: #666;
        }

        .fade-in {
            animation: fadeIn 0.8s ease-out forwards;
        }

        .fade-out {
            animation: fadeOut 0.8s ease-out forwards;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes fadeOut {
            from { opacity: 1; transform: translateY(0); }
            to { opacity: 0; transform: translateY(-30px); }
        }

        .message-time {
            font-size: 11px;
            color: #999;
            margin-top: 4px;
            opacity: 0.7;
        }

        .customer .message-time {
            text-align: right;
        }

        .bot .message-time {
            text-align: left;
        }

        .avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: #25d366;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 14px;
            flex-shrink: 0;
        }

        .customer .avatar {
            background: #128c7e;
        }

        .typing-indicator {
            display: none;
            padding: 12px 16px;
            background: white;
            border-radius: 18px;
            border-bottom-left-radius: 4px;
            margin-bottom: 20px;
            box-shadow: 0 1px 2px rgba(0,0,0,0.1);
            animation: messageSlideIn 0.3s ease-out;
        }

        .typing-dots {
            display: flex;
            gap: 4px;
        }

        .typing-dot {
            width: 6px;
            height: 6px;
            background: #999;
            border-radius: 50%;
            animation: typing 1.4s infinite;
        }

        .typing-dot:nth-child(2) { animation-delay: 0.2s; }
        .typing-dot:nth-child(3) { animation-delay: 0.4s; }

        @keyframes typing {
            0%, 60%, 100% { transform: translateY(0); opacity: 0.5; }
            30% { transform: translateY(-10px); opacity: 1; }
        }

        .chat-input {
            padding: 20px;
            background: white;
            border-top: 1px solid #eee;
        }

        .input-container {
            display: flex;
            gap: 12px;
            align-items: center;
        }

        .message-input {
            flex: 1;
            border: 1px solid #ddd;
            border-radius: 25px;
            padding: 12px 20px;
            font-size: 14px;
            outline: none;
            transition: border-color 0.3s;
            resize: none;
            min-height: 44px;
            max-height: 120px;
        }

        .message-input:focus {
            border-color: #25d366;
        }

        .send-btn {
            background: #25d366;
            color: white;
            border: none;
            border-radius: 50%;
            width: 44px;
            height: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: background 0.3s;
            flex-shrink: 0;
        }

        .send-btn:hover {
            background: #128c7e;
        }

        .send-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
        }

        .status-bar {
            padding: 8px 20px;
            background: #f8f9fa;
            border-top: 1px solid #eee;
            font-size: 12px;
            color: #666;
            text-align: center;
        }

        .hidden-controls {
            position: fixed;
            top: 10px;
            right: 10px;
            z-index: 1000;
        }

        .control-btn {
            background: #075e54;
            color: white;
            border: none;
            border-radius: 6px;
            padding: 8px 16px;
            margin: 5px;
            font-size: 12px;
            cursor: pointer;
            transition: background 0.3s;
        }

        .control-btn:hover {
            background: #128c7e;
        }

        .control-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
        }

        .nav-controls {
            display: flex;
            gap: 8px;
            margin-left: auto;
        }

        .nav-btn {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 6px;
            padding: 6px 12px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .nav-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-1px);
        }

        .nav-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .nav-btn.active {
            background: rgba(255, 255, 255, 0.4);
            border-color: rgba(255, 255, 255, 0.6);
        }

        @media (max-width: 768px) {
            .chat-container {
                height: 100vh;
                max-width: none;
                border-radius: 0;
            }
        }
    </style>
</head>
<body>
    <div class="chat-container">
        <div class="chat-header">
            <div class="header-avatar">WB</div>
            <div class="header-info">
                <h1>WealthBot Assistant</h1>
                <p>FinWealth Advisors ‚Ä¢ 24/7 Support</p>
                <div class="client-info">
                    <span class="client-name" id="currentClientName">Ready to assist</span>
                    <span class="client-time" id="currentClientTime"></span>
                </div>
            </div>
            <div class="online-indicator">
                <div class="online-dot"></div>
                <span>Online</span>
            </div>
            <div class="nav-controls">
                <button class="nav-btn" id="prevBtn" onclick="prevScenario()" disabled>‚¨ÖÔ∏è Back</button>
                <button class="nav-btn" id="nextBtn" onclick="nextScenario()">Next ‚û°Ô∏è</button>
                <button class="nav-btn" id="pauseBtn" onclick="toggleAutoDemo()">‚è∏Ô∏è Pause</button>
            </div>
        </div>

        <div class="chat-area">
            <div id="chatMessages" class="content-view active">
                <!-- Chat messages will be added here -->
            </div>
            
            <div id="typingIndicator" class="typing-indicator" style="display: none;">
                <div class="typing-dots">
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                </div>
            </div>
            
            <div id="dashboardScreen" class="content-view">
                <div class="dashboard-container">
                    <div class="dashboard-header">
                        <h1 class="dashboard-title">24/7 Performance Metrics Dashboard</h1>
                        <p class="dashboard-subtitle">Real-time WealthBot Assistant Performance</p>
                    </div>
                    
                    <div class="metrics-section">
                        <h2 class="section-title">üìä Today's Statistics (Real-time)</h2>
                        <div class="stats-grid">
                            <div class="stat-card">
                                <div class="stat-number">1,247</div>
                                <div class="stat-label">Total Inquiries Handled</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-number">18s</div>
                                <div class="stat-label">Average Response Time</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-number">94.7%</div>
                                <div class="stat-label">Customer Satisfaction</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-number">87%</div>
                                <div class="stat-label">Issues Resolved Without Human</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-number">156</div>
                                <div class="stat-label">Night Inquiries (10 PM - 6 AM)</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-number">3</div>
                                <div class="stat-label">Languages Supported</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="metrics-section">
                        <h2 class="section-title">üíº Customer Impact</h2>
                        <div class="stats-grid">
                            <div class="stat-card">
                                <div class="stat-number">‚Çπ2.3L</div>
                                <div class="stat-label">Monthly Cost Savings</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-number">‚Çπ15L</div>
                                <div class="stat-label">Revenue Protected Monthly</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-number">+23%</div>
                                <div class="stat-label">Customer Satisfaction Increase</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-number">65%</div>
                                <div class="stat-label">Advisor Time Freed Up</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="metrics-section">
                        <h2 class="section-title">üìà Before vs After Comparison</h2>
                        <table class="comparison-table">
                            <thead>
                                <tr>
                                    <th>Metric</th>
                                    <th>Before AI Assistant</th>
                                    <th>After AI Assistant</th>
                                    <th>Improvement</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Staff Coverage</td>
                                    <td>3 staff (9 AM - 9 PM)</td>
                                    <td>24/7 with human backup</td>
                                    <td>+100% availability</td>
                                </tr>
                                <tr>
                                    <td>Response Time</td>
                                    <td>45 minutes</td>
                                    <td>18 seconds</td>
                                    <td>99.3% faster</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    
                    <div class="impact-highlight">
                        <p class="impact-quote">"AI isn't replacing human advisors - it's empowering them to focus on what matters most: building relationships and creating wealth."</p>
                    </div>
                </div>
            </div>
            
            <div id="businessImpactScreen" class="content-view">
                <div class="impact-container">
                    <h1 class="impact-title">üöÄ Business Impact Summary</h1>
                    <p class="impact-subtitle">Transforming Customer Service with AI-Powered Solutions</p>
                    
                    <div class="impact-metrics">
                        <div class="impact-card">
                            <div class="impact-icon">üí∞</div>
                            <div class="impact-number">‚Çπ2.3L</div>
                            <div class="impact-description">Monthly Cost Savings</div>
                        </div>
                        <div class="impact-card">
                            <div class="impact-icon">üìä</div>
                            <div class="impact-number">‚Çπ15L</div>
                            <div class="impact-description">Revenue Protected Monthly</div>
                        </div>
                        <div class="impact-card">
                            <div class="impact-icon">üòä</div>
                            <div class="impact-number">+23%</div>
                            <div class="impact-description">Customer Satisfaction Increase</div>
                        </div>
                        <div class="impact-card">
                            <div class="impact-icon">‚è∞</div>
                            <div class="impact-number">65%</div>
                            <div class="impact-description">Advisor Time Freed Up</div>
                        </div>
                        <div class="impact-card">
                            <div class="impact-icon">üåç</div>
                            <div class="impact-number">24/7</div>
                            <div class="impact-description">Global Availability</div>
                        </div>
                        <div class="impact-card">
                            <div class="impact-icon">üéØ</div>
                            <div class="impact-number">99.3%</div>
                            <div class="impact-description">Query Resolution Rate</div>
                        </div>
                    </div>
                    
                    <div class="impact-highlight">
                        <p class="impact-quote">"AI isn't replacing human advisors - it's empowering them to focus on what matters most: building relationships and creating wealth."</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="chat-input">
            <div class="input-container">
                <textarea class="message-input" id="messageInput" placeholder="Type your message..." onkeypress="handleKeyPress(event)" rows="1"></textarea>
                <button class="send-btn" onclick="sendMessage()" id="sendBtn">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/>
                    </svg>
                </button>
            </div>
        </div>

        <div class="status-bar">
            <span id="statusText">Starting automated demo sequence...</span>
        </div>
    </div>

    <!-- Hidden controls for development -->
    <div class="hidden-controls">
        <button class="control-btn" onclick="startAutoDemo()">üöÄ Start Demo</button>
        <button class="control-btn" onclick="stopAutoDemo()">‚èπÔ∏è Stop Demo</button>
        <button class="control-btn" onclick="resetDemo()">üîÑ Reset</button>
    </div>

    <script>
        class WealthBotDemo {
            constructor() {
                this.scenarios = [
                    {
                        clientName: "Priya Sharma",
                        time: "2:30 AM",
                        customer: "Hi, I can't sleep and checking my portfolio. Can you tell me my current SIP balance and today's NAV for HDFC Small Cap Fund?",
                        bot: `Good evening Ms. Sharma! Here's your portfolio summary. Don't worry about the small dip - small cap funds are volatile short-term but historically strong performers. Your portfolio is well-diversified! üòä`,
                        visualContent: `<div class="portfolio-chart"><h3>üìä Portfolio Summary</h3><div class="metric-grid"><div class="metric-item"><span class="metric-value">‚Çπ2.47L</span><span class="metric-label">Current Value</span></div><div class="metric-item"><span class="metric-value">3,248</span><span class="metric-label">Units Held</span></div><div class="metric-item"><span class="metric-value">‚Çπ76.25</span><span class="metric-label">Today's NAV</span></div><div class="metric-item"><span class="metric-value">‚Çπ5K</span><span class="metric-label">Monthly SIP</span></div></div></div>`
                    },
                    {
                        clientName: "Rajesh Patel",
                        time: "9:15 AM",
                        customer: "I need to invest ‚Çπ1.5L before March for 80C. What are best options? I already have EPF and LIC.",
                        bot: `Namaste Rajesh ji! Perfect timing for tax planning. Here's your optimal 80C allocation:

**Why ELSS?** Only 3-year lock-in vs 5-15 years others, historical returns 12-15% vs 6-8% traditional plans.

Shall I schedule a call with your advisor Amit sir? Available: Today 2 PM, 4 PM, Tomorrow 10 AM.`,
                        visualContent: `<div class="visual-content"><h3>üí∞ Tax Planning</h3><div class="metric-grid"><div class="metric-item"><span class="metric-value">‚Çπ1L</span><span class="metric-label">ELSS (67%)</span></div><div class="metric-item"><span class="metric-value">‚Çπ50K</span><span class="metric-label">PPF (33%)</span></div><div class="metric-item"><span class="metric-value">‚Çπ46.8K</span><span class="metric-label">Tax Savings</span></div><div class="metric-item"><span class="metric-value">3y</span><span class="metric-label">Lock-in</span></div></div></div>`
                    },
                    {
                        clientName: "Meera Singh",
                        time: "11:45 AM",
                        customer: "Market is falling! My portfolio down 15% this month. Should I stop SIPs? Very worried üò∞",
                        bot: `Hi Meera! I understand your concern. Here are the facts:

**Market Context:** Nifty corrected 12% from peak (normal in bull markets). Your portfolio (15% down) is within expected range.

**SIP Strategy - DON'T stop:** Market dips = More units at lower prices. Your last 3 SIPs bought 18% more units than 6 months ago.

Remember: You're investing for 2030 goals, not 2024 fluctuations. This is exactly when wealth is created!`,
                        visualContent: `<div class="portfolio-chart"><h3>üìâ Portfolio Analysis</h3><div class="metric-grid"><div class="metric-item"><span class="metric-value">‚Çπ8.45L</span><span class="metric-label">Current Value</span></div><div class="metric-item"><span class="metric-value">‚Çπ9.97L</span><span class="metric-label">Peak Value</span></div><div class="metric-item"><span class="metric-value">+17%</span><span class="metric-label">Overall Profit</span></div><div class="metric-item"><span class="metric-value">‚Çπ7.2L</span><span class="metric-label">Total Invested</span></div></div><p>üí° Continue SIPs during dips</p></div>`
                    },
                    {
                        clientName: "Sunil Kumar",
                        time: "1:20 PM",
                        customer: "Main apne bete ke liye education fund start karna chahta hun. Woh abhi 5 saal ka hai. Monthly 10,000 invest kar sakta hun.",
                        bot: `Namaste Sunil ji! Bahut achha decision hai. Aapke bete ke education ke liye perfect planning:

**Fund Mix:**
‚Ä¢ Large Cap: 40% (‚Çπ4K) - Stability
‚Ä¢ Mid Cap: 35% (‚Çπ3.5K) - Growth  
‚Ä¢ International: 25% (‚Çπ2.5K) - Diversification

**Special Benefits:** Step-up SIP option, tax savings under 80C, partial withdrawal after 5 years.

Shall I prepare the paperwork? We can complete everything online in 15 minutes!`,
                        visualContent: `<div class="visual-content"><h3>üéì Education Fund</h3><div class="metric-grid"><div class="metric-item"><span class="metric-value">‚Çπ10K</span><span class="metric-label">Monthly SIP</span></div><div class="metric-item"><span class="metric-value">13y</span><span class="metric-label">Horizon</span></div><div class="metric-item"><span class="metric-value">‚Çπ55-65L</span><span class="metric-label">Expected</span></div><div class="metric-item"><span class="metric-value">12%</span><span class="metric-label">Returns</span></div></div></div>`
                    },
                    {
                        clientName: "Arvind Joshi",
                        time: "3:45 PM",
                        customer: "Can't login to mobile app. Keeps saying wrong password but I'm entering correct one. Need to check NAV urgently.",
                        bot: `Hi Arvind! Sorry for the login trouble. Here's your quick NAV check:

**Login Fix:**
1. Clear app cache
2. Restart app
3. I'll send temporary password via SMS if needed

**Alternative:** Check on www.finwealth.com with same credentials.

Issue resolved or need the temporary password?`,
                        visualContent: `<div class="visual-content"><h3>üì± Quick NAV</h3><div class="metric-grid"><div class="metric-item"><span class="metric-value">‚Çπ43.28</span><span class="metric-label">SBI ‚Üë1.2%</span></div><div class="metric-item"><span class="metric-value">‚Çπ89.15</span><span class="metric-label">HDFC ‚Üë0.8%</span></div><div class="metric-item"><span class="metric-value">‚Çπ156.72</span><span class="metric-label">ICICI ‚Üë2.1%</span></div><div class="metric-item"><span class="metric-value">24/7</span><span class="metric-label">Support</span></div></div></div>`
                    },
                    {
                        clientName: "Kavita Reddy",
                        time: "7:30 PM",
                        customer: "Need to withdraw ‚Çπ2 lakhs from my equity funds for daughter's wedding next month. Which funds should I redeem from?",
                        bot: `Hi Kavita! Congratulations on your daughter's wedding! üéâ Here's your optimal redemption strategy:

**Tax Implication:** LTCG tax ~‚Çπ2,100 (only on gains above ‚Çπ1L)
**Processing Time:** 3-4 working days to your bank account

Shall I initiate the redemption? You'll receive OTP for final confirmation.`,
                                                visualContent: `<div class="portfolio-chart"><h3>üí∏ Redemption</h3><div class="metric-grid"><div class="metric-item"><span class="metric-value">‚Çπ1.2L</span><span class="metric-label">HDFC (4y)</span></div><div class="metric-item"><span class="metric-value">‚Çπ80K</span><span class="metric-label">SBI (3.5y)</span></div><div class="metric-item"><span class="metric-value">‚Çπ2.1K</span><span class="metric-label">LTCG Tax</span></div><div class="metric-item"><span class="metric-value">‚Çπ1.98L</span><span class="metric-label">Net Amount</span></div></div></div>`
                    },
                    {
                        clientName: "Rohit Agarwal",
                        time: "11:55 PM",
                        customer: "Just saw US markets crashed 3%. Will it affect my portfolio tomorrow? Should I place any orders tonight?",
                        bot: `Hi Rohit! Yes, I'm tracking global markets too. Here's the situation:

**US Market Impact:** Fed interest rate concerns + tech earnings

**Expected India Impact Tomorrow:** Nifty likely to open 1.5-2% lower, your portfolio may dip 2-3% initially. Banking & IT stocks most affected.

**My Recommendation - DON'T Panic Trade:** These corrections are healthy and temporary. Your portfolio is well-diversified across sectors.

**Smart Move:** If you have surplus cash, I can set up additional SIP installments to buy the dip tomorrow. Your avg. purchase cost will improve significantly.

Markets have recovered from far worse. Stay calm! üòå`,
                        visualContent: `<div class="visual-content"><h3>üåç Market Impact</h3><div class="metric-grid"><div class="metric-item"><span class="metric-value">-2.8%</span><span class="metric-label">Dow Jones</span></div><div class="metric-item"><span class="metric-value">-3.2%</span><span class="metric-label">Nasdaq</span></div><div class="metric-item"><span class="metric-value">-1.5%</span><span class="metric-label">Expected Nifty</span></div><div class="metric-item"><span class="metric-value">-2-3%</span><span class="metric-label">Portfolio</span></div></div><p>üí° Consider additional SIPs</p></div>`
                    }
                ];
                this.currentScenarioIndex = 0;
                this.isAutoDemoRunning = false;
                this.timeouts = []; // Array to store all timeouts
                this.init();
            }

            // Helper method to add timeouts to the array
            addTimeout(timeoutId) {
                this.timeouts.push(timeoutId);
            }

            // Helper method to clear all timeouts
            clearAllTimeouts() {
                this.timeouts.forEach(timeoutId => clearTimeout(timeoutId));
                this.timeouts = [];
            }

            // Helper method to stop auto demo and clear timeouts
            stopAutoDemoAndClearTimeouts() {
                this.isAutoDemoRunning = false;
                this.clearAllTimeouts();
                this.updateStatus("Demo paused. Use navigation buttons to control.");
                this.updateNavButtons();
            }

            init() {
                this.updateStatus("Demo initialized. Starting automated sequence...");
                this.updateNavButtons(); // Set initial button states
                // Start demo automatically after a short delay
                setTimeout(() => {
                    this.startAutoDemo();
                }, 2000);
            }

            startAutoDemo() {
                this.isAutoDemoRunning = true;
                this.currentScenarioIndex = 0;
                this.updateStatus("Starting automated demo sequence...");
                this.updateNavButtons();
                this.runNextScenario();
            }

            stopAutoDemo() {
                this.isAutoDemoRunning = false;
                if (this.demoInterval) {
                    clearTimeout(this.demoInterval);
                    this.demoInterval = null;
                }
                this.updateStatus("Demo stopped by user");
            }

            runNextScenario() {
                if (!this.isAutoDemoRunning || this.currentScenarioIndex >= this.scenarios.length) {
                    return;
                }

                // Show the current scenario with typing indicator for automatic demo
                this.showCurrentScenario(true);
                
                // Then set up automatic progression to next scenario
                const progressionTimeout = setTimeout(() => {
                    if (!this.isAutoDemoRunning) return;
                    
                    if (this.currentScenarioIndex < this.scenarios.length - 1) {
                        // More scenarios to go
                        this.currentScenarioIndex++;
                        this.runNextScenario();
                    } else {
                        // All scenarios completed, show dashboard
                        this.showDashboard();
                    }
                }, 5000); // Increased delay to account for typing indicator
                this.addTimeout(progressionTimeout);
            }

            updateNavButtons() {
                const prevBtn = document.getElementById('prevBtn');
                const nextBtn = document.getElementById('nextBtn');
                const pauseBtn = document.getElementById('pauseBtn');
                
                // Update Back button
                prevBtn.disabled = this.currentScenarioIndex <= 0;
                
                // Update Next button
                nextBtn.disabled = this.currentScenarioIndex >= this.scenarios.length - 1;
                
                // Update Pause button
                if (this.isAutoDemoRunning) {
                    pauseBtn.innerHTML = '‚è∏Ô∏è Pause';
                    pauseBtn.classList.add('active');
                } else {
                    pauseBtn.innerHTML = '‚ñ∂Ô∏è Play';
                    pauseBtn.classList.remove('active');
                }
            }

            addMessage(text, sender, clientName = null) {
                const chatMessages = document.getElementById('chatMessages');
                const messageDiv = document.createElement('div');
                messageDiv.className = `message ${sender}`;
                
                const avatar = document.createElement('div');
                avatar.className = 'avatar';
                
                if (sender === 'bot') {
                    avatar.textContent = 'WB';
                } else {
                    avatar.textContent = clientName ? clientName.charAt(0).toUpperCase() : 'üë§';
                }
                
                const messageContent = document.createElement('div');
                messageContent.className = 'message-content';
                
                // Convert **text** to <strong>text</strong>
                const formattedText = text.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
                messageContent.innerHTML = formattedText.replace(/\n/g, '<br>');
                
                const messageTime = document.createElement('div');
                messageContent.appendChild(messageTime);
                
                if (sender === 'customer') {
                    messageDiv.appendChild(messageContent);
                    messageDiv.appendChild(avatar);
                    messageTime.className = 'message-time';
                    messageTime.textContent = this.getCurrentTime();
                } else {
                    messageDiv.appendChild(avatar);
                    messageDiv.appendChild(messageContent);
                    messageTime.className = 'message-time';
                    messageTime.textContent = this.getCurrentTime();
                }
                
                chatMessages.appendChild(messageDiv);
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }

            showTyping() {
                document.getElementById('typingIndicator').style.display = 'block';
                const chatMessages = document.getElementById('chatMessages');
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }

            hideTyping() {
                document.getElementById('typingIndicator').style.display = 'none';
            }

            getCurrentTime() {
                const now = new Date();
                return now.toLocaleTimeString('en-US', { 
                    hour: '2-digit', 
                    minute: '2-digit',
                    hour12: true 
                });
            }

            updateStatus(text) {
                document.getElementById('statusText').textContent = text;
            }

            updateHeader(clientName, clientTime) {
                const clientNameElement = document.getElementById('currentClientName');
                const clientTimeElement = document.getElementById('currentClientTime');
                
                if (clientName && clientTime) {
                    clientNameElement.textContent = `Assisting: ${clientName}`;
                    clientTimeElement.textContent = ` ‚Ä¢ ${clientTime}`;
                } else if (clientName) {
                    clientNameElement.textContent = clientName;
                    clientTimeElement.textContent = '';
                } else {
                    clientNameElement.textContent = 'Ready to assist';
                    clientTimeElement.textContent = '';
                }
            }

            clearChat() {
                const chatMessages = document.getElementById('chatMessages');
                chatMessages.innerHTML = '';
            }

            resetDemo() {
                this.stopAutoDemoAndClearTimeouts();
                this.currentScenarioIndex = 0;
                this.clearChat();
                this.updateHeader("WealthBot Assistant", "24/7 Support");
                this.updateNavButtons();
                this.updateStatus("Demo reset. Click 'Start Demo' to begin.");
            }

            showDashboard() {
                // Hide chat messages view
                document.getElementById('chatMessages').classList.remove('active');
                document.getElementById('typingIndicator').style.display = 'none';
                
                // Show dashboard view
                document.getElementById('dashboardScreen').classList.add('active');
                
                // Auto-transition to business impact after 8 seconds (only if auto demo is running)
                if (this.isAutoDemoRunning) {
                    const dashboardTimeout = setTimeout(() => {
                        if (this.isAutoDemoRunning) {
                            this.showBusinessImpact();
                        }
                    }, 8000);
                    this.addTimeout(dashboardTimeout);
                }
            }

            showBusinessImpact() {
                // Hide dashboard view
                document.getElementById('dashboardScreen').classList.remove('active');
                
                // Show business impact view
                document.getElementById('businessImpactScreen').classList.add('active');
                
                // Auto-return to chat after 10 seconds (only if auto demo is running)
                if (this.isAutoDemoRunning) {
                    const impactTimeout = setTimeout(() => {
                        if (this.isAutoDemoRunning) {
                            this.returnToChat();
                        }
                    }, 10000);
                    this.addTimeout(impactTimeout);
                }
            }

            returnToChat() {
                // Hide business impact view
                document.getElementById('businessImpactScreen').classList.remove('active');
                
                // Show chat messages view
                document.getElementById('chatMessages').classList.add('active');
                
                // Reset demo
                this.resetDemo();
            }

            prevScenario() {
                this.stopAutoDemoAndClearTimeouts();
                if (this.currentScenarioIndex > 0) {
                    this.currentScenarioIndex--;
                    this.showCurrentScenario();
                }
                this.updateNavButtons();
            }

            nextScenario() {
                this.stopAutoDemoAndClearTimeouts();
                if (this.currentScenarioIndex < this.scenarios.length - 1) {
                    this.currentScenarioIndex++;
                    this.showCurrentScenario();
                } else if (this.currentScenarioIndex === this.scenarios.length - 1) {
                    // All scenarios completed, show dashboard
                    this.showDashboard();
                }
                this.updateNavButtons();
            }

            // New method to show current scenario without automatic progression
            showCurrentScenario(showTypingIndicator = false) {
                if (this.currentScenarioIndex >= this.scenarios.length) {
                    return;
                }

                const scenario = this.scenarios[this.currentScenarioIndex];
                
                // Clear chat
                this.clearChat();
                
                // Update header with client info
                this.updateHeader(scenario.clientName, scenario.time);
                
                // Add customer message
                this.addMessage(scenario.customer, 'customer', scenario.clientName);
                
                if (showTypingIndicator) {
                    // Show typing indicator for automatic demo
                    this.showTyping();
                    
                    // Add bot response after typing delay
                    const typingTimeout = setTimeout(() => {
                        if (!this.isAutoDemoRunning) return;
                        
                        this.hideTyping();
                        this.addBotResponse(scenario);
                    }, 2000);
                    this.addTimeout(typingTimeout);
                } else {
                    // Add bot response immediately for manual navigation
                    this.addBotResponse(scenario);
                }
                
                this.updateStatus(`Showing: ${scenario.clientName} (${scenario.time})`);
            }

            // Helper method to add bot response
            addBotResponse(scenario) {
                if (scenario.visualContent) {
                    const combinedMessage = `<div class="message-with-visual"><div class="visual-section">${scenario.visualContent}</div><div class="text-section">${scenario.bot}</div></div>`;
                    this.addMessage(combinedMessage, 'bot', scenario.clientName);
                } else {
                    this.addMessage(scenario.bot, 'bot', scenario.clientName);
                }
            }

            toggleAutoDemo() {
                if (this.isAutoDemoRunning) {
                    this.stopAutoDemoAndClearTimeouts();
                } else {
                    this.startAutoDemo();
                }
            }
        }

        // Initialize the demo
        let wealthBotDemo;
        
        document.addEventListener('DOMContentLoaded', () => {
            wealthBotDemo = new WealthBotDemo();
        });

        // Global functions for hidden controls
        function startAutoDemo() {
            if (wealthBotDemo) {
                wealthBotDemo.startAutoDemo();
            }
        }

        function stopAutoDemo() {
            if (wealthBotDemo) {
                wealthBotDemo.stopAutoDemo();
            }
        }

        function resetDemo() {
            if (wealthBotDemo) {
                wealthBotDemo.resetDemo();
            }
        }

        function prevScenario() {
            if (wealthBotDemo) {
                wealthBotDemo.prevScenario();
            }
        }

        function nextScenario() {
            if (wealthBotDemo) {
                wealthBotDemo.nextScenario();
            }
        }

        function toggleAutoDemo() {
            if (wealthBotDemo) {
                wealthBotDemo.toggleAutoDemo();
            }
        }

        function sendMessage() {
            const input = document.getElementById('messageInput');
            const message = input.value.trim();
            
            if (message && wealthBotDemo) {
                wealthBotDemo.addMessage(message, 'customer');
                input.value = '';
                
                // Simulate bot response
                wealthBotDemo.showTyping();
                setTimeout(() => {
                    wealthBotDemo.hideTyping();
                    wealthBotDemo.addMessage("Thank you for your message! I'm processing your request.", 'bot');
                }, 1500);
            }
        }

        function handleKeyPress(event) {
            if (event.key === 'Enter' && !event.shiftKey) {
                event.preventDefault();
                sendMessage();
            }
        }

        // Auto-resize textarea
        document.addEventListener('DOMContentLoaded', () => {
            const textarea = document.getElementById('messageInput');
            textarea.addEventListener('input', function() {
                this.style.height = 'auto';
                this.style.height = Math.min(this.scrollHeight, 120) + 'px';
            });
        });
    </script>
</body>
</html>
