<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Krid AI - Reconciliation Management System</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" crossorigin="anonymous">
    <link rel="icon" type="image/svg+xml" href="fav_icon_krid_ai.svg">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #1e1e1e;
            color: #ffffff;
            overflow: hidden;
            height: 100vh;
            line-height: 1.5;
        }

        /* Desktop App Container */
        .desktop-app {
            width: 100vw;
            height: 100vh;
            background: linear-gradient(135deg, #2d3748 0%, #1a202c 100%);
            display: flex;
            flex-direction: column;
            position: relative;
        }

        /* Title Bar */
        .title-bar {
            height: 32px;
            background: #2d3748;
            border-bottom: 1px solid #4a5568;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 1rem;
            user-select: none;
        }

        .title-bar__left {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .window-controls {
            display: flex;
            gap: 0.5rem;
        }

        .window-control {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            cursor: pointer;
        }

        .window-control--close { background: #ff5f57; }
        .window-control--minimize { background: #ffbd2e; }
        .window-control--maximize { background: #28ca42; }

        .app-title {
            font-size: 0.8rem;
            font-weight: 500;
            color: #a0aec0;
        }

        .title-bar__right {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.75rem;
            color: #a0aec0;
        }

        .user-avatar {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.6rem;
            font-weight: 600;
        }

        .top-navbar {
            background: #2c3e50;
            color: white;
            padding: 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .top-navbar .container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 20px;
        }

        .logo-section {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo-section img {
            width: 40px;
            height: 40px;
            border-radius: 8px;
        }

        .logo-section h1 {
            font-size: 1.5rem;
            margin: 0;
            font-weight: 600;
        }

        .nav-controls {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px 16px;
            background: rgba(255,255,255,0.1);
            border-radius: 20px;
        }

        .user-avatar {
            width: 32px;
            height: 32px;
            background: #3498db;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .page-header {
            background: white;
            border-radius: 8px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            border-left: 4px solid #3498db;
        }

        .page-header h2 {
            color: #2c3e50;
            margin: 0 0 10px 0;
            font-size: 1.8rem;
            font-weight: 600;
        }

        .page-header p {
            color: #7f8c8d;
            margin: 0;
            font-size: 1rem;
        }

        .scenario-controls {
            background: white;
            border-radius: 8px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            border: 1px solid #e9ecef;
        }

        .scenario-controls h3 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.2rem;
            font-weight: 600;
        }

        .day-selector {
            display: flex;
            justify-content: center;
            gap: 12px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .day-btn {
            padding: 10px 20px;
            border: 1px solid #e9ecef;
            border-radius: 6px;
            background: white;
            color: #495057;
            cursor: pointer;
            transition: all 0.2s ease;
            font-weight: 500;
            font-size: 0.9rem;
        }

        .day-btn:hover {
            background: #f8f9fa;
            border-color: #3498db;
        }

        .day-btn.active {
            background: #3498db;
            color: white;
            border-color: #3498db;
        }

        .day-btn.holiday {
            border-color: #f39c12;
            color: #f39c12;
        }

        .day-btn.holiday.active {
            background: #f39c12;
            color: white;
        }

        .day-btn.settled {
            border-color: #27ae60;
            color: #27ae60;
        }

        .day-btn.settled.active {
            background: #27ae60;
            color: white;
        }

        /* Main Content Area */
        .main-content {
            flex: 1;
            display: flex;
            background: #1a202c;
        }

        /* Sidebar */
        .sidebar {
            width: 280px;
            background: #2d3748;
            border-right: 1px solid #4a5568;
            display: flex;
            flex-direction: column;
        }

        .sidebar-header {
            padding: 1.5rem;
            border-bottom: 1px solid #4a5568;
        }

        .company-logo {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 1rem;
        }

        .krid-logo-img {
            height: 40px;
            width: auto;
            filter: brightness(0) invert(1);
            transition: all 0.3s ease;
        }

        .krid-logo-img:hover {
            transform: scale(1.05);
            filter: brightness(0) invert(1) drop-shadow(0 0 8px rgba(255, 255, 255, 0.3));
        }

        .sidebar-nav {
            padding: 1rem;
        }

        .nav-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem;
            border-radius: 8px;
            color: #a0aec0;
            cursor: pointer;
            transition: all 0.2s ease;
            margin-bottom: 0.25rem;
        }

        .nav-item:hover {
            background: #4a5568;
            color: #ffffff;
        }

        .nav-item.active {
            background: rgba(102, 126, 234, 0.2);
            color: #667eea;
        }

        .nav-icon {
            width: 16px;
            text-align: center;
        }

        /* Chat Panel */
        .chat-panel {
            flex: 1;
            display: flex;
            flex-direction: column;
            background: #1a202c;
            height: 100%;
            overflow: hidden;
        }

        .chat-header {
            padding: 1rem 1.5rem;
            border-bottom: 1px solid #4a5568;
            background: #2d3748;
        }

        .chat-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: #ffffff;
            margin-bottom: 0.25rem;
        }

        .chat-subtitle {
            font-size: 0.85rem;
            color: #a0aec0;
        }

        .chat-messages {
            flex: 1;
            padding: 1.5rem;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 1rem;
            scroll-behavior: smooth;
            max-height: calc(100vh - 200px);
            min-height: 400px;
        }

        .system-status {
            display: flex;
            align-items: center;
            margin-bottom: 1rem;
            padding: 1rem;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid #4a5568;
            transition: all 0.3s ease;
        }

        .system-status:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: #667eea;
        }

        .status-indicator {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            margin-right: 1rem;
            flex-shrink: 0;
            position: relative;
        }

        .status-indicator::after {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            border-radius: 50%;
            background: inherit;
            opacity: 0.4;
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); opacity: 0.4; }
            50% { transform: scale(1.5); opacity: 0.2; }
            100% { transform: scale(1); opacity: 0.4; }
        }

        .status-indicator.green { 
            background: #10b981;
            box-shadow: 0 0 10px rgba(16, 185, 129, 0.4);
        }
        .status-indicator.yellow { 
            background: #f59e0b;
            box-shadow: 0 0 10px rgba(245, 158, 11, 0.4);
        }
        .status-indicator.red { 
            background: #ef4444;
            box-shadow: 0 0 10px rgba(239, 68, 68, 0.4);
        }
        .status-indicator.blue { 
            background: #3b82f6;
            box-shadow: 0 0 10px rgba(59, 130, 246, 0.4);
        }

        .system-info {
            flex: 1;
        }

        .system-name {
            font-weight: 600;
            color: #ffffff;
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
        }

        .system-details {
            color: #a0aec0;
            font-size: 0.85rem;
            line-height: 1.4;
        }

        .system-details strong {
            color: #e2e8f0;
            font-weight: 500;
        }

        .system-value {
            color: #667eea;
            font-weight: 600;
        }

        .ai-panel {
            grid-column: 1 / 3;
            background: white;
            color: #2c3e50;
            border: 1px solid #e9ecef;
        }

        .ai-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }

        .ai-avatar {
            width: 50px;
            height: 50px;
            background: #3498db;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            font-size: 1.5rem;
            color: white;
        }

        .ai-status {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 6px;
            margin-bottom: 20px;
            border: 1px solid #e9ecef;
        }

        .ai-reasoning {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 6px;
            margin-bottom: 20px;
            border: 1px solid #e9ecef;
        }

        .ai-reasoning h4 {
            margin-bottom: 15px;
            color: #2c3e50;
        }

        .reasoning-text {
            line-height: 1.6;
            color: #495057;
        }

        .ai-actions {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 6px;
            border: 1px solid #e9ecef;
        }

        .ai-actions h4 {
            margin-bottom: 15px;
            color: #2c3e50;
        }

        .action-item {
            background: white;
            padding: 15px;
            border-radius: 6px;
            margin-bottom: 10px;
            border-left: 4px solid #27ae60;
            border: 1px solid #e9ecef;
        }

        .transaction-details {
            background: #1a202c;
            padding: 20px;
            border-radius: 6px;
            margin-top: 20px;
            border: 1px solid #4a5568;
        }

        .transaction-details h4 {
            color: #ffffff;
            margin-bottom: 15px;
            font-weight: 600;
        }

        .detail-row {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid #4a5568;
        }

        .detail-label {
            font-weight: 500;
            color: #a0aec0;
        }

        .detail-value {
            color: #ffffff;
            font-weight: 500;
        }

        .holiday-notice {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            color: #856404;
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
            text-align: center;
        }

        .settlement-complete {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
            text-align: center;
        }

        .chat-panel {
            background: #1a202c;
            border-radius: 8px;
            padding: 25px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
            height: 850px;
            display: flex;
            flex-direction: column;
            border: 1px solid #4a5568;
        }

        .chat-header {
            border-bottom: 1px solid #4a5568;
            padding-bottom: 15px;
            margin-bottom: 20px;
        }

        .chat-header h3 {
            color: #ffffff;
            margin-bottom: 5px;
            font-weight: 600;
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            margin-bottom: 20px;
            padding-right: 10px;
        }

        .message {
            max-width: 70%;
            padding: 1rem 1.25rem;
            border-radius: 12px;
            font-size: 0.95rem;
            line-height: 1.5;
            position: relative;
            opacity: 0;
            transform: translateY(20px);
            animation: messageSlideIn 0.5s ease-out forwards;
            white-space: pre-wrap;
        }

        .message.human {
            background: #2d3748;
            color: #ffffff;
            align-self: flex-end;
            border-bottom-right-radius: 4px;
            border: 1px solid #4a5568;
        }

        .message.human:hover {
            border-color: #667eea;
            background: #374151;
        }

        .message.ai {
            background: linear-gradient(135deg, #3b82f6 0%, #6366f1 100%);
            color: #ffffff;
            align-self: flex-start;
            border-bottom-left-radius: 4px;
            box-shadow: 0 4px 15px rgba(59, 130, 246, 0.2);
        }

        .message.ai:hover {
            box-shadow: 0 4px 20px rgba(59, 130, 246, 0.3);
        }

        .message.ai p {
            margin: 0.5rem 0;
        }

        .message.ai ul, .message.ai ol {
            margin: 0.5rem 0;
            padding-left: 1.5rem;
        }

        .message.ai li {
            margin: 0.25rem 0;
        }

        .message.ai strong {
            color: #ffffff;
            font-weight: 600;
        }

        .message.system {
            background: rgba(45, 55, 72, 0.6);
            color: #e2e8f0;
            align-self: center;
            font-size: 0.85rem;
            font-style: italic;
            border-radius: 20px;
            padding: 0.5rem 1rem;
            max-width: 80%;
            text-align: center;
            border: 1px solid rgba(74, 85, 104, 0.4);
            backdrop-filter: blur(8px);
        }

        .message code {
            background: rgba(0, 0, 0, 0.2);
            padding: 0.2rem 0.4rem;
            border-radius: 4px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9em;
        }

        .message pre {
            background: rgba(0, 0, 0, 0.2);
            padding: 1rem;
            border-radius: 8px;
            overflow-x: auto;
            margin: 0.75rem 0;
            width: 100%;
        }

        .message pre code {
            background: none;
            padding: 0;
            border-radius: 0;
            display: block;
            width: 100%;
        }

        .message-sender {
            font-size: 0.75rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            opacity: 0.8;
            color: rgba(255, 255, 255, 0.9);
        }

        .highlight-data {
            background: rgba(255, 255, 255, 0.2);
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
            font-weight: 600;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        /* Chat Actions */
        .chat-actions {
            border-top: 1px solid #4a5568;
            background: #2d3748;
            padding: 1rem;
        }

        .quick-actions {
            display: flex;
            gap: 0.75rem;
            margin-bottom: 1rem;
            padding: 0 0.5rem;
        }

        .action-btn {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            background: #1a202c;
            border: 1px solid #4a5568;
            border-radius: 6px;
            color: #a0aec0;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .action-btn:hover {
            background: #2d3748;
            border-color: #667eea;
            color: #ffffff;
        }

        .action-btn i {
            font-size: 0.85rem;
        }

        /* Input Area */
        .chat-input {
            background: #2d3748;
        }

        .input-container {
            display: flex;
            gap: 0.5rem;
            align-items: flex-end;
            background: #1a202c;
            border: 1px solid #4a5568;
            border-radius: 8px;
            padding: 0.5rem;
        }

        .input-prefix {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 32px;
            color: #667eea;
            font-size: 1rem;
        }

        .input-field {
            flex: 1;
            background: transparent;
            border: none;
            color: #ffffff;
            font-size: 0.9rem;
            resize: none;
            min-height: 40px;
            max-height: 120px;
            padding: 0.5rem;
        }

        .input-field:focus {
            outline: none;
        }

        .input-container:focus-within {
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .send-button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            border-radius: 6px;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .send-button:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }

        .input-suggestions {
            display: flex;
            gap: 0.5rem;
            margin-top: 0.75rem;
            padding: 0 0.5rem;
            flex-wrap: wrap;
        }

        .suggestion {
            font-size: 0.8rem;
            color: #a0aec0;
            padding: 0.25rem 0.75rem;
            background: #1a202c;
            border: 1px solid #4a5568;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .suggestion:hover {
            background: #2d3748;
            border-color: #667eea;
            color: #ffffff;
        }

        /* Typing Indicator */
        .typing-indicator {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1.25rem;
            background: #2d3748;
            border-radius: 12px;
            align-self: flex-start;
            margin-top: 0.5rem;
            max-width: 70%;
        }

        .typing-dots {
            display: flex;
            gap: 0.25rem;
        }

        .typing-dot {
            width: 6px;
            height: 6px;
            background: #a0aec0;
            border-radius: 50%;
            animation: typingPulse 1.4s infinite ease-in-out;
        }

        .typing-dot:nth-child(1) { animation-delay: 0s; }
        .typing-dot:nth-child(2) { animation-delay: 0.2s; }
        .typing-dot:nth-child(3) { animation-delay: 0.4s; }

        @keyframes typingPulse {
            0%, 60%, 100% {
                transform: scale(1);
                opacity: 0.4;
            }
            30% {
                transform: scale(1.2);
                opacity: 1;
            }
        }

        /* Right Panel */
        .right-panel {
            width: 380px;
            background: #2d3748;
            border-left: 1px solid #4a5568;
            display: flex;
            flex-direction: column;
            height: 100%;
            overflow: hidden;
        }

        .panel-header {
            padding: 1rem 1.5rem;
            border-bottom: 1px solid #4a5568;
            background: #374151;
        }

        .panel-title {
            font-size: 1rem;
            font-weight: 600;
            color: #ffffff;
            margin-bottom: 0.25rem;
        }

        .panel-subtitle {
            font-size: 0.8rem;
            color: #a0aec0;
        }

        .panel-content {
            flex: 1;
            padding: 1.5rem;
            overflow-y: auto;
            scroll-behavior: smooth;
            max-height: calc(100vh - 200px);
            min-height: 400px;
        }

        /* Analysis Cards */
        .analysis-card {
            background: #1a202c;
            border: 1px solid #4a5568;
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1rem;
            transition: all 0.3s ease;
        }

        .analysis-card:hover {
            border-color: #667eea;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.2);
        }

        .card-header {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 0.75rem;
        }

        .card-icon {
            width: 24px;
            height: 24px;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
        }

        .card-icon--specs { background: #065f46; color: #10b981; }
        .card-icon--pricing { background: #7c2d12; color: #f97316; }
        .card-icon--timeline { background: #1e3a8a; color: #3b82f6; }
        .card-icon--proposal { background: #581c87; color: #a855f7; }

        .card-title {
            font-size: 0.9rem;
            font-weight: 600;
            color: #ffffff;
        }

        .card-content {
            font-size: 0.85rem;
            color: #e2e8f0;
            line-height: 1.4;
        }

        .card-content .detail-row {
            display: flex;
            justify-content: space-between;
            padding: 0.75rem 0;
            border-bottom: 1px solid #4a5568;
        }

        .card-content .detail-row:last-child {
            border-bottom: none;
        }

        .card-content .detail-label {
            color: #a0aec0;
            font-weight: 500;
        }

        .card-content .detail-value {
            color: #ffffff;
            font-weight: 600;
        }

        .card-content .highlight-value {
            color: #667eea;
            font-weight: 600;
        }

        /* Animations */
        @keyframes messageSlideIn {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Scrollbar Styling */
        .chat-messages::-webkit-scrollbar,
        .panel-content::-webkit-scrollbar {
            width: 8px;
        }

        .chat-messages::-webkit-scrollbar-track,
        .panel-content::-webkit-scrollbar-track {
            background: rgba(74, 85, 104, 0.3);
            border-radius: 4px;
        }

        .chat-messages::-webkit-scrollbar-thumb,
        .panel-content::-webkit-scrollbar-thumb {
            background: rgba(102, 126, 234, 0.6);
            border-radius: 4px;
        }

        .chat-messages::-webkit-scrollbar-thumb:hover,
        .panel-content::-webkit-scrollbar-thumb:hover {
            background: rgba(102, 126, 234, 0.8);
        }

        .chat-messages,
        .panel-content {
            -webkit-overflow-scrolling: touch;
            scrollbar-width: thin;
            scrollbar-color: rgba(102, 126, 234, 0.6) rgba(74, 85, 104, 0.3);
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            
            .day-selector {
                flex-direction: column;
                align-items: center;
            }
            
            .day-btn {
                width: 200px;
            }
        }
    </style>
</head>
<body>
    <div class="desktop-app">
        <!-- Title Bar -->
        <div class="title-bar">
            <div class="title-bar__left">
                <div class="window-controls">
                    <div class="window-control window-control--close"></div>
                    <div class="window-control window-control--minimize"></div>
                    <div class="window-control window-control--maximize"></div>
                </div>
                <div class="app-title">Krid AI Reconciliation System v1.0.0</div>
            </div>
            <div class="title-bar__right">
                <div class="user-info">
                    <div class="user-avatar">RK</div>
                    <span>Rahul Kumar</span>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Sidebar -->
            <div class="sidebar">
                <div class="sidebar-header">
                    <div class="company-logo">
                        <img src="logo.png" alt="Krid AI Logo" class="krid-logo-img">
                    </div>
                </div>
                <nav class="sidebar-nav">
                    <div class="nav-item active">
                        <i class="nav-icon fas fa-sync-alt"></i>
                        <span>Reconciliation</span>
                    </div>
                    <div class="nav-item">
                        <i class="nav-icon fas fa-history"></i>
                        <span>History</span>
                    </div>
                    <div class="nav-item">
                        <i class="nav-icon fas fa-chart-line"></i>
                        <span>Analytics</span>
                    </div>
                    <div class="nav-item">
                        <i class="nav-icon fas fa-cog"></i>
                        <span>Settings</span>
                    </div>
                </nav>
            </div>

            <!-- Chat Panel -->
            <div class="chat-panel">
                <div class="chat-header">
                    <div class="chat-title">AI Reconciliation Assistant</div>
                    <div class="chat-subtitle">Real-time monitoring • Intelligent analysis • Multi-system reconciliation</div>
                </div>

                <div class="chat-messages" id="chatMessages">
                    <!-- Messages will be populated by JavaScript -->
                </div>

                <div class="chat-actions">
                    <div class="quick-actions">
                        <button class="action-btn" onclick="runReconciliationCheck()">
                            <i class="fas fa-sync-alt"></i>
                            Run Reconciliation
                        </button>
                        <button class="action-btn" onclick="advanceToNextDay()">
                            <i class="fas fa-forward"></i>
                            Next Day
                        </button>
                        <button class="action-btn" onclick="showHelp()">
                            <i class="fas fa-question-circle"></i>
                            Help
                        </button>
                    </div>
                    <div class="chat-input">
                        <div class="input-container">
                            <div class="input-prefix">
                                <i class="fas fa-robot"></i>
                            </div>
                            <textarea 
                                id="chat-input"
                                class="input-field" 
                                placeholder="Ask the AI assistant about reconciliation status, checks, or next steps..."
                                rows="1"
                                onkeypress="handleKeyPress(event)"
                            ></textarea>
                            <button class="send-button" onclick="sendMessage()">
                                <i class="fas fa-paper-plane"></i>
                            </button>
                        </div>
                        <div class="input-suggestions">
                            <span class="suggestion" onclick="usePrompt(this)">Check current status</span>
                            <span class="suggestion" onclick="usePrompt(this)">Explain discrepancy</span>
                            <span class="suggestion" onclick="usePrompt(this)">Settlement timeline</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Right Panel -->
            <div class="right-panel">
                <div class="panel-header">
                    <div class="panel-title">System Status</div>
                    <div class="panel-subtitle">Real-time monitoring and analysis</div>
                </div>

                <div class="panel-content">
                    <div class="analysis-card">
                        <div class="card-header">
                            <div class="card-icon card-icon--proposal">
                                <i class="fas fa-file-invoice"></i>
                            </div>
                            <div class="card-title">Transaction Details</div>
                        </div>
                        <div class="transaction-details">
                            <div class="detail-row">
                                <span class="detail-label">Client ID:</span>
                                <span class="detail-value">CLIENT_001</span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-label">Amount:</span>
                                <span class="detail-value">₹10,00,000</span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-label">Fund Type:</span>
                                <span class="detail-value">Debt Fund</span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-label">Request Date:</span>
                                <span class="detail-value">Monday, 9:00 AM</span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-label">Expected Settlement:</span>
                                <span class="detail-value" id="expected-settlement">T+2 (Wednesday)</span>
                            </div>
                        </div>
                        <div id="special-notices"></div>
                    </div>

                    <div class="analysis-card">
                        <div class="card-header">
                            <div class="card-icon card-icon--specs">
                                <i class="fas fa-exchange-alt"></i>
                            </div>
                            <div class="card-title">Broker System</div>
                        </div>
                        <div id="broker-status" class="system-status">
                            <div class="status-indicator green"></div>
                            <div class="system-info">
                                <div class="system-name">Broker Trading System</div>
                                <div class="system-details">Status: Active | Last Update: Real-time</div>
                            </div>
                        </div>
                        <div id="broker-details"></div>
                    </div>

                    <div class="analysis-card">
                        <div class="card-header">
                            <div class="card-icon card-icon--pricing">
                                <i class="fas fa-university"></i>
                            </div>
                            <div class="card-title">PMS Status</div>
                        </div>
                        <div id="pms-status" class="system-status">
                            <div class="status-indicator green"></div>
                            <div class="system-info">
                                <div class="system-name">Portfolio Management System</div>
                                <div class="system-details">Status: Active | Last Update: Real-time</div>
                            </div>
                        </div>
                        <div id="pms-details"></div>
                    </div>

                    <div class="analysis-card">
                        <div class="card-header">
                            <div class="card-icon card-icon--timeline">
                                <i class="fas fa-database"></i>
                            </div>
                            <div class="card-title">Depository Status</div>
                        </div>
                        <div id="depository-status" class="system-status">
                            <div class="status-indicator green"></div>
                            <div class="system-info">
                                <div class="system-name">Central Depository Services</div>
                                <div class="system-details">Status: Active | Settlement: T+2</div>
                            </div>
                        </div>
                        <div id="depository-details"></div>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <script>
        const dayData = {
            0: { // Monday - Day 0
                broker: {
                    status: 'green',
                    details: 'Redemption request recorded. Internal balance updated to ₹0. Transaction pending settlement.',
                    balance: '₹0'
                },
                pms: {
                    status: 'yellow',
                    details: 'Shows full holdings (₹10,00,000). Status: Pending Redemption.',
                    balance: '₹10,00,000'
                },
                depository: {
                    status: 'green',
                    details: 'No change yet. Settlement pending. Units still held.',
                    balance: '₹10,00,000'
                },
                aiStatus: 'Monitoring redemption request initiation',
                aiReasoning: 'Client has initiated redemption request. Broker has updated internal records. Normal T+0 status - no reconciliation issues expected.',
                aiActions: 'No action required. Monitoring settlement process.',
                expectedSettlement: 'T+2 (Wednesday)',
                specialNotices: ''
            },
            1: { // Tuesday - Day 1
                broker: {
                    status: 'green',
                    details: 'Redemption confirmed. Internal balance remains ₹0. Settlement in progress.',
                    balance: '₹0'
                },
                pms: {
                    status: 'yellow',
                    details: 'Still shows full holdings (₹10,00,000). Status: Pending Redemption.',
                    balance: '₹10,00,000'
                },
                depository: {
                    status: 'green',
                    details: 'No change yet. T+1 settlement pending. Units still held.',
                    balance: '₹10,00,000'
                },
                aiStatus: 'First reconciliation check completed',
                aiReasoning: 'T+1 mismatch detected: Broker shows ₹0, but PMS and Depository show ₹10,00,000. This is normal for T+1 debt fund redemption. No action needed yet.',
                aiActions: 'PMS not flagged for error. Normal T+1 behavior observed.',
                expectedSettlement: 'T+2 (Wednesday)',
                specialNotices: ''
            },
            2: { // Wednesday - Day 2 (Holiday)
                broker: {
                    status: 'green',
                    details: 'Redemption confirmed. Internal balance remains ₹0. Settlement status pending investigation.',
                    balance: '₹0'
                },
                pms: {
                    status: 'yellow',
                    details: 'Shows full holdings (₹10,00,000). Status: Pending Redemption.',
                    balance: '₹10,00,000'
                },
                depository: {
                    status: 'yellow',
                    details: 'No change in settlement status. Units still held.',
                    balance: '₹10,00,000'
                },
                aiStatus: 'Investigating settlement delay',
                aiReasoning: 'Unusual delay detected in T+2 settlement. Investigation revealed public holiday declared to mourn the passing of Lata Mangeshkar affecting settlement cycle. Settlement timeline adjusted to T+3.',
                aiActions: 'Updated expected settlement date to Thursday. Notified operations team and clients about holiday impact. Added holiday tracking to prevent future alerts.',
                expectedSettlement: 'T+3 (Thursday)',
                specialNotices: '<div class="holiday-notice">🏛️ Public Holiday: National day of mourning for Lata Mangeshkar<br>Settlement delayed by 1 business day</div>'
            },
            3: { // Thursday - Day 3
                broker: {
                    status: 'green',
                    details: 'Redemption completed. Internal balance remains ₹0. Settlement successful.',
                    balance: '₹0'
                },
                pms: {
                    status: 'green',
                    details: 'Balance updated to ₹0. Redemption completed. Status: Settled.',
                    balance: '₹0'
                },
                depository: {
                    status: 'green',
                    details: 'Settlement completed. Units transferred. Balance updated to ₹0.',
                    balance: '₹0'
                },
                aiStatus: 'Final reconciliation completed - All systems aligned',
                aiReasoning: 'All systems now show consistent ₹0 balance. Depository and PMS are in sync. Transaction successfully settled across all systems.',
                aiActions: 'Cleared pending redemption status in PMS. Marked transaction as settled across all systems. Reconciliation complete.',
                expectedSettlement: 'Settled',
                specialNotices: '<div class="settlement-complete">✅ Settlement Complete - All systems reconciled</div>'
            }
        };

        let currentDay = 0;
        let chatHistory = [];
        let autoProgressTimer = null;

        function showDay(day) {
            // Update active button
            document.querySelectorAll('.day-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');

            // Update current day
            currentDay = day;

            const data = dayData[day];

            // Update broker
            document.querySelector('#broker-status .status-indicator').className = `status-indicator ${data.broker.status}`;
            document.querySelector('#broker-details').innerHTML = `
                <div class="card-content">
                    <div class="detail-row">
                        <span class="detail-label">Current Balance:</span>
                        <span class="detail-value">${data.broker.balance}</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Status:</span>
                        <span class="detail-value">${data.broker.details}</span>
                    </div>
                </div>
            `;

            // Update PMS
            document.querySelector('#pms-status .status-indicator').className = `status-indicator ${data.pms.status}`;
            document.querySelector('#pms-details').innerHTML = `
                <div class="card-content">
                    <div class="detail-row">
                        <span class="detail-label">Current Balance:</span>
                        <span class="detail-value">${data.pms.balance}</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Status:</span>
                        <span class="detail-value">${data.pms.details}</span>
                    </div>
                </div>
            `;

            // Update depository
            document.querySelector('#depository-status .status-indicator').className = `status-indicator ${data.depository.status}`;
            document.querySelector('#depository-details').innerHTML = `
                <div class="card-content">
                    <div class="detail-row">
                        <span class="detail-label">Current Balance:</span>
                        <span class="detail-value">${data.depository.balance}</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Status:</span>
                        <span class="detail-value">${data.depository.details}</span>
                    </div>
                </div>
            `;

            // Update day selector
            document.querySelectorAll('.day-btn').forEach((btn, idx) => {
                btn.classList.remove('active');
                if (idx === day) {
                    btn.classList.add('active');
                }
            });

            // Update expected settlement
            document.querySelector('#expected-settlement').innerHTML = data.expectedSettlement;

            // Update special notices
            document.querySelector('#special-notices').innerHTML = data.specialNotices;
        }

        // Initialize with Day 0
        showDay(0);

        // Chat functionality
        function sendMessage() {
            const input = document.getElementById('chat-input');
            const message = input.value.trim();
            if (!message) return;

            // Add human message
            addMessage(message, 'human');
            input.value = '';

            // Show typing indicator
            showTypingIndicator();

            // Process message and generate AI response
            setTimeout(async () => {
                hideTypingIndicator();
                await processMessage(message);
            }, 1500);
        }

        function handleKeyPress(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }

        function addMessage(text, type) {
            const chatMessages = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${type}`;
            
            // Add sender for human and AI messages
            if (type === 'human' || type === 'ai') {
                const senderDiv = document.createElement('div');
                senderDiv.className = 'message-sender';
                senderDiv.textContent = type === 'human' ? 'You' : 'AI Assistant';
                messageDiv.appendChild(senderDiv);
            }
            
            // Add message content with markdown formatting
            const contentDiv = document.createElement('div');
            const formattedText = text
                .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
                .replace(/\n\n/g, '</p><p>')
                .replace(/\n/g, '<br>')
                .replace(/• (.*?)(?=(\n|$))/g, '<li>$1</li>')
                .replace(/(?<=<li>.*?)\n/g, '</li><li>');
            
            // Wrap in paragraphs if it contains multiple paragraphs
            if (formattedText.includes('</p><p>')) {
                contentDiv.innerHTML = '<p>' + formattedText + '</p>';
            } else {
                contentDiv.innerHTML = formattedText;
            }
            
            // Convert consecutive li elements into a list
            if (contentDiv.innerHTML.includes('<li>')) {
                contentDiv.innerHTML = contentDiv.innerHTML.replace(/(<li>.*?<\/li>)+/g, '<ul>$&</ul>');
            }
            
            messageDiv.appendChild(contentDiv);
            
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
            
            // Store in chat history
            chatHistory.push({ type, text, timestamp: new Date() });
        }

        function showTypingIndicator() {
            const chatMessages = document.getElementById('chatMessages');
            const typingDiv = document.createElement('div');
            typingDiv.id = 'typingIndicator';
            typingDiv.className = 'typing-indicator';
            
            const senderDiv = document.createElement('div');
            senderDiv.className = 'message-sender';
            senderDiv.textContent = 'AI Assistant';
            typingDiv.appendChild(senderDiv);
            
            const dotsDiv = document.createElement('div');
            dotsDiv.className = 'typing-dots';
            for (let i = 0; i < 3; i++) {
                const dot = document.createElement('div');
                dot.className = 'typing-dot';
                dotsDiv.appendChild(dot);
            }
            typingDiv.appendChild(dotsDiv);
            
            chatMessages.appendChild(typingDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function hideTypingIndicator() {
            const typingIndicator = document.getElementById('typingIndicator');
            if (typingIndicator) {
                typingIndicator.remove();
            }
        }

        async function processMessage(message) {
            const lowerMessage = message.toLowerCase();
            
            if (lowerMessage.includes('reconcile') || lowerMessage.includes('check') || lowerMessage.includes('status')) {
                // Run reconciliation check
                await runReconciliationCheck();
            } else if (lowerMessage.includes('next day') || lowerMessage.includes('advance') || lowerMessage.includes('progress')) {
                // Advance to next day
                advanceToNextDay();
            } else if (lowerMessage.includes('explain') || lowerMessage.includes('discrepancy') || lowerMessage.includes('difference')) {
                // Explain current discrepancies
                explainDiscrepancies();
            } else if (lowerMessage.includes('timeline') || lowerMessage.includes('settlement') || lowerMessage.includes('when')) {
                // Explain settlement timeline
                explainSettlementTimeline();
            } else if (lowerMessage.includes('help') || lowerMessage.includes('what can you do')) {
                // Show help
                showHelp();
            } else {
                // Default response
                addMessage("I understand you want to interact with the reconciliation system. You can ask me about the current status, explain any discrepancies, or check the settlement timeline. You can also use the quick action buttons above.", 'ai');
            }
        }

        function showHelp() {
            addMessage("Here's how I can help you:", 'ai');
            setTimeout(() => {
                addMessage(`📋 **Available Commands:**
                
• Run reconciliation check - Analyze current system status
• Advance to next day - Progress through the settlement timeline
• Explain discrepancy - Understand any mismatches between systems
• Settlement timeline - Check expected settlement dates and status

You can use the quick action buttons above or type your questions naturally. I'll understand and help you monitor the reconciliation process.`, 'ai');
            }, 500);
        }

        function explainDiscrepancies() {
            const data = dayData[currentDay];
            const hasMismatch = data.broker.balance !== data.pms.balance || data.pms.balance !== data.depository.balance;
            
            if (!hasMismatch) {
                addMessage("✅ There are currently no discrepancies between systems. All balances are aligned.", 'ai');
                return;
            }

            addMessage(`🔍 **Current System Discrepancies:**

• Broker shows: ${data.broker.balance}
• PMS shows: ${data.pms.balance}
• Depository shows: ${data.depository.balance}

**Analysis:** ${data.aiReasoning}

**Impact:** ${data.aiActions}`, 'ai');
        }

        function explainSettlementTimeline() {
            const data = dayData[currentDay];
            const dayNames = ['Monday', 'Tuesday', 'Wednesday (Holiday)', 'Thursday'];
            
            addMessage(`📅 **Settlement Timeline:**

• Current Day: ${dayNames[currentDay]}
• Expected Settlement: ${data.expectedSettlement}
• Current Status: ${data.depository.details}

${currentDay === 2 ? '⚠️ Note: Settlement delayed due to bank holiday' : ''}
${currentDay === 3 ? '✅ Settlement completed successfully' : ''}`, 'ai');
        }

        function usePrompt(element) {
            const input = document.getElementById('chat-input');
            input.value = element.textContent;
            input.focus();
        }

        async function runReconciliationCheck() {
            const data = dayData[currentDay];
            
            // Initial system message
            addMessage(`🔄 Initiating comprehensive reconciliation check for Day ${currentDay}...`, 'system');
            
            // Broker System Check
            await new Promise(resolve => setTimeout(resolve, 1000));
            addMessage(`🔍 Connecting to Broker Trading System...`, 'system');
            
            await new Promise(resolve => setTimeout(resolve, 1500));
            addMessage(`📊 **Broker System Analysis:**\n\n` +
                      `• Retrieving transaction details\n` +
                      `• Analyzing account balances\n` +
                      `• Checking settlement status\n\n` +
                      `**Status:** ${data.broker.status === 'green' ? '✅' : data.broker.status === 'yellow' ? '⚠️' : '❌'} ${data.broker.details}`, 'ai');
            
            // PMS Check
            await new Promise(resolve => setTimeout(resolve, 1000));
            addMessage(`🔍 Connecting to Portfolio Management System...`, 'system');
            
            await new Promise(resolve => setTimeout(resolve, 1500));
            addMessage(`📊 **PMS Analysis:**\n\n` +
                      `• Verifying holdings data\n` +
                      `• Cross-checking redemption status\n` +
                      `• Validating transaction records\n\n` +
                      `**Status:** ${data.pms.status === 'green' ? '✅' : data.pms.status === 'yellow' ? '⚠️' : '❌'} ${data.pms.details}`, 'ai');
            
            // Depository Check
            await new Promise(resolve => setTimeout(resolve, 1000));
            addMessage(`🔍 Connecting to Central Depository Services...`, 'system');
            
            await new Promise(resolve => setTimeout(resolve, 1500));
            addMessage(`📊 **Depository Analysis:**\n\n` +
                      `• Checking unit holdings\n` +
                      `• Verifying settlement cycle\n` +
                      `• Analyzing transfer status\n\n` +
                      `**Status:** ${data.depository.status === 'green' ? '✅' : data.depository.status === 'yellow' ? '⚠️' : '❌'} ${data.depository.details}`, 'ai');

            // Special investigation for Day 2
            if (currentDay === 2) {
                await new Promise(resolve => setTimeout(resolve, 1500));
                addMessage(`⚠️ **Anomaly Detected:**\nDepository status remains unchanged on T+2. This is unusual for standard settlement cycle.`, 'ai');
                
                await new Promise(resolve => setTimeout(resolve, 1500));
                addMessage(`🔍 **Initiating Investigation:**\n\n` +
                          `1. Checking for system remarks or alerts...\n` +
                          `• No system alerts found\n` +
                          `• No technical issues reported\n\n` +
                          `2. Verifying depository messages...\n` +
                          `• No error messages\n` +
                          `• No rejection notices\n\n` +
                          `3. Checking holiday calendar...\n` +
                          `🎯 **Found:** Public Holiday declared - National day of mourning for Lata Mangeshkar\n\n` +
                          `**Analysis:** Settlement cycle will be extended by one business day.`, 'ai');
                
                await new Promise(resolve => setTimeout(resolve, 1500));
                addMessage(`📅 **Settlement Timeline Update:**\n` +
                          `• Original Timeline: T+2 (Today)\n` +
                          `• Revised Timeline: T+3 (Tomorrow)\n` +
                          `• Reason: National Public Holiday\n\n` +
                          `All systems functioning normally. Delay is due to declared holiday.`, 'ai');

                // Additional follow-up actions
                await new Promise(resolve => setTimeout(resolve, 1000));
                addMessage(`🔄 Updating PMS with new settlement timeline...`, 'system');
                
                await new Promise(resolve => setTimeout(resolve, 1500));
                addMessage(`✅ **PMS Update Complete:**\n` +
                          `• Settlement date adjusted to T+3\n` +
                          `• Internal tracking systems updated\n` +
                          `• Operations team notified`, 'ai');

                await new Promise(resolve => setTimeout(resolve, 1000));
                addMessage(`📱 Preparing client notification...`, 'system');

                await new Promise(resolve => setTimeout(resolve, 1500));
                addMessage(`📬 **Client Communication Sent:**\n` +
                          `• Informed about settlement delay\n` +
                          `• Explained holiday impact\n` +
                          `• Provided updated timeline\n` +
                          `• Included holiday reference\n\n` +
                          `Client notification delivered successfully.`, 'ai');
            }
            
            // Final Analysis
            await new Promise(resolve => setTimeout(resolve, 1500));
            addMessage(`🤖 **AI Reconciliation Summary:**\n\n` +
                      `**System Analysis Complete**\n` +
                      `• Broker System: ${data.broker.status === 'green' ? '✅' : data.broker.status === 'yellow' ? '⚠️' : '❌'}\n` +
                      `• PMS: ${data.pms.status === 'green' ? '✅' : data.pms.status === 'yellow' ? '⚠️' : '❌'}\n` +
                      `• Depository: ${data.depository.status === 'green' ? '✅' : data.depository.status === 'yellow' ? '⚠️' : '❌'}\n\n` +
                      `**AI Reasoning:**\n${data.aiReasoning}\n\n` +
                      `**Recommended Actions:**\n${data.aiActions}`, 'ai');
        }

        function advanceToNextDay() {
            if (currentDay < 3) {
                currentDay++;
                
                // Flash day indicator
                showDayFlash(currentDay);
                
                // Update the UI
                showDay(currentDay);
                
                // Add system message
                addMessage(`⏰ **Day ${currentDay} has arrived!** The AI agent will now run its reconciliation check with updated system statuses.`, 'system');
                
                // Auto-run reconciliation after a delay
                setTimeout(async () => {
                    await runReconciliationCheck();
                }, 2000);
            } else {
                addMessage("We've reached the final day (Day 3). The reconciliation process is complete. You can go back to previous days using the day selector buttons above.", 'ai');
            }
        }

        function showDayFlash(day) {
            const dayNames = ['Monday', 'Tuesday', 'Wednesday (Holiday)', 'Thursday'];
            const flashDiv = document.createElement('div');
            flashDiv.className = 'message system';
            flashDiv.textContent = `Day ${day}: ${dayNames[day]}`;
            document.getElementById('chatMessages').appendChild(flashDiv);
            
            // Scroll to bottom
            document.getElementById('chatMessages').scrollTop = document.getElementById('chatMessages').scrollHeight;
        }

        // Initialize demo
        function initDemo() {
            addMessage('Initializing Krid AI Reconciliation System...', 'system');
            setTimeout(() => {
                addMessage('🔄 **System Status:**\n• Broker Trading System: Connected\n• Portfolio Management System: Connected\n• Central Depository Services: Connected\n\nAI Reconciliation Assistant is ready to help you monitor and reconcile transactions.', 'ai');
            }, 1000);
            setTimeout(() => {
                addMessage('I can help you with:\n• Real-time reconciliation checks\n• Discrepancy analysis\n• Settlement monitoring\n• Holiday-aware processing\n\nUse the quick actions above or type your questions naturally.', 'ai');
            }, 2000);
            showDay(0);
        }
        document.addEventListener('DOMContentLoaded', initDemo);
    </script>
</body>
</html>
